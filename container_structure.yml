---
schemaVersion: "2.0.0"

fileExistenceTests:
  - name: "LICENSE shouldExist: true"
    path: /usr/switcher_webapi/LICENSE
    shouldExist: true
  - name: "helpers.py shouldExist: true"
    path: /usr/switcher_webapi/webapp.py
    shouldExist: true
  - name: "requirements.txt shouldExist: true"
    path: /usr/switcher_webapi/requirements.txt
    shouldExist: true
  - name: "tests shouldExist: false"
    path: /usr/switcher_webapi/tests/
    shouldExist: false


fileContentTests:
  - name: "LICENSE is Apache-2.0"
    path: /usr/switcher_webapi/LICENSE
    expectedContents: ["Apache License.*Version 2.0.*"]

metadataTest:
  labels:
    - key: "org.opencontainers.image.created"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.authors"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.url"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.documentation"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.source"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.version"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.revision"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.vendor"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.licenses"
      value: "Apache-2.0"
    - key: "org.opencontainers.image.ref.name"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.title"
      value: "."
      isRegex: true
    - key: "org.opencontainers.image.description"
      value: "."
      isRegex: true
  exposedPorts: ["8000"]
  entrypoint: []
  cmd: ["/bin/sh", "-c", "python webapp.py -p 8000"]
  workdir: "/usr/switcher_webapi"
